{% extends "layouts/base.html" %}

{% block content %}
    <h1 class="text-4xl font-bold mt-6 mb-6 text-gray-900 text-center">編輯預約</h1>
    <section class="container mx-auto border px-6 py-4 my-4 rounded-lg">
        <div class="items-center p-1">
            <a href="{% url 'reservations:teacher_available' %}" class="btn">返回可預約時間</a>
            <a href="{% url 'reservations:student_index' %}" class="btn">查看我的預約</a>
        </div>
        <div class="text-md mb-4 mt-4">
            <li class="p-2 rounded-lg flex justify-between">
                <div class="flex items-center gap-4">
                    <p class="font-bold">目前預約<span class="text-blue-600 px-2 py-1">{{ reservation.schedule.teacher.get_display_name }}</span>專家時間：</p>
                    <p>{{ reservation.schedule.start_time|date:'Y/m/d H:i' }} - {{ reservation.schedule.end_time|date:'Y/m/d H:i' }}</p>
                </div>
            </li>
        </div>
        <h2 class="text-2xl font-bold mt-6 mb-6 text-gray-900 text-center">選擇新的專家時間</h2>
        <form method="POST" action="{% url 'reservations:student_edit' reservation.id %}">
            {% csrf_token %}
            <ul class="list-disc">
                {% for available in teacher_available %}
                    <li class="p-2 rounded-lg flex justify-between border mb-2">
                        <div class="flex flex-col">
                            <p>專家：{{ available.teacher.get_display_name }}</p>
                            <p>時間：{{ available.start_time|date:'Y/m/d H:i' }} - {{ available.end_time|date:'Y/m/d H:i' }}</p>
                        </div>
                        <button name="schedule_id" value="{{ available.id }}" class="btn btn-sm bg-green-600 text-white">更新預約</button>
                    </li>
                {% empty %}
                    <li class="text-center text-xl text-gray-500 py-4">目前沒有可預約的時間</li>
                {% endfor %}
            </ul>
        </form>
    </section>
{% endblock %}